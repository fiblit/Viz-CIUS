<!DOCTYPE html>
<!-- saved from url=(0086)https://ay16.moodle.umn.edu/pluginfile.php/1953944/mod_resource/content/1/HelloD3.html -->
<html lang="en" class="gr__ay16_moodle_umn_edu">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>FBI: UCR: CIUS</title>	
        <!-- https://github.com/d3/d3 -->
        <script src="https://d3js.org/d3.v3.js"></script>
            <!-- for d3.geo.path to work we need v3, however I read that
            we can use v4 if we change it to geoPath. Didn't bother yet -->'
        <!-- https://github.com/d3/d3-geo -->
        <script src="https://d3js.org/d3-array.v1.min.js"></script>
        <script src="https://d3js.org/d3-geo.v1.min.js"></script>
        <script>
            var projection = d3.geoAlbers(),
                path = d3.geoPath(projection);
        </script>
        <style>
            svg {
                background: #eee;
                width: 960px;
                height: 500px;
            }

            #counties path {
                stroke: #fff;
                stroke-width: .25px;
            }

            #states path {
                fill: none;
                stroke: #fff;
                stroke-width: 1.5px;
            }
            .Blues .q0-9{fill:rgb(247,251,255)}
            .Blues .q1-9{fill:rgb(222,235,247)}
            .Blues .q2-9{fill:rgb(198,219,239)}
            .Blues .q3-9{fill:rgb(158,202,225)}
            .Blues .q4-9{fill:rgb(107,174,214)}
            .Blues .q5-9{fill:rgb(66,146,198)}
            .Blues .q6-9{fill:rgb(33,113,181)}
            .Blues .q7-9{fill:rgb(8,81,156)}
            .Blues .q8-9{fill:rgb(8,48,107)}
        </style>
    </head>
    <body data-gr-c-s-loaded="true">
        <script type="text/javascript">
        
    /*
        //create SVG element  
        var chart1 = d3
            .select("body")
            .append("svg")
            .attr("width", 600)
            .attr("height", 400);

        //add a rectangle
        chart1
            .append("rect")
            .attr("x", 25)
            .attr("y", 150)
            .attr("width", 100)
            .attr("height",100)
            .style("fill","gray");
*/
        
    //note:
    /*
    // load data and draw a line graph
		d3.csv("population.csv", function(data) {
			var parsedData = data.map(function(d) {
				return [ +d['Year'], +d['Population'], +d['Annual population change'], +d['Annual growth rate (%)'] ];
			});
			
			console.log(parsedData); // uncomment to check the parsedData
			drawWorldPopulation(parsedData);
			drawBarChart(parsedData, 2, 2, 2, "Annual Population Change");
			drawBarChart(parsedData, 3, 3, 3, "Annual Growth Rate");
		});
    */

        //source
        // https://strongriley.github.io/d3/ex/choropleth.html
        var data; // loaded asynchronously later.

        var path = d3.geo
            .path();

        var svg = d3
            .select("body")
            .append("svg:svg")
            .attr("width", 1200)
            .attr("height", 800);

        var counties = svg
            .append("svg:g")
            .attr("id", "counties")
            .attr("class", "Blues");

        var states = svg
            .append("svg:g")
            .attr("id", "states");

        d3.json("./data/us-counties.json", function(json) {
            counties
                .selectAll("path")
                    .data(json.features)
                    .enter()
                        .append("svg:path")
                            .attr("class", data ? quantize : null)
                            .attr("d", path);
        });

        d3.json("./data/us-states.json", function(json) {
            states
                .selectAll("path")
                    .data(json.features)
                    .enter()
                        .append("svg:path")
                            .attr("d", path);
        });

        d3.json("./data/unemployment.json", function(json) {
            data = json;
            counties
                .selectAll("path")
                    .attr("class", quantize);
        });

        function quantize(d) {
            //what the hell is that ~~ operator?
            return "q" + Math.min(8, ~~(data[d.id] * 9 / 12)) + "-9";
        }
        
        </script>
    </body>
</html>